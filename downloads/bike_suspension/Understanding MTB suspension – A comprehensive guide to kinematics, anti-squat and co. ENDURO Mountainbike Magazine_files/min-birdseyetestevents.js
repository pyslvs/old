function resetZoom(){mapForReset.setView([40,-100],2,!1)}function resetZoomTop100(){mapForReset.setView([51,5],6,!1)}function goThere(e,t){mapForReset.setView([e,t],6,!1)}function goToShop(e,t,a,n){var r=mapForReset.getBounds().getNorthEast().lng-mapForReset.getBounds().getSouthWest().lng,o=a/n*r*.5;mapForReset.setView([e,t-o],mapForReset.getZoom(),!1)}var mapForReset;(function(){var e;e=jQuery,e.fn.extend({birdseye:function(t){var a,n,r,o,i,s,l,p,u,c;return i=this,c={loading_indicator:!0,initial_coordinates:[48,-1],initial_zoom:4,tile_layer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",request_geo_params:{ne_lat:function(e){return num=e.getBounds().getNorthEast().lat,num},ne_lng:function(e){return num=e.getBounds().getNorthEast().lng,num},sw_lat:function(e){return num=e.getBounds().getSouthWest().lat,num},sw_lng:function(e){return num=e.getBounds().getSouthWest().lng,num}},response_json_key:"results",response_params_latlng:function(e){return[e.latitude,e.longitude]},response_params_pagination:{page:function(e){return e.meta.page},per_page:function(e){return e.meta.per_page},total_pages:function(e){return e.meta.total_pages},count:function(e){return e.meta.count}},results_el:e(".birdseye-results"),results_template:function(e,t){return"<div># "+e+": "+t.name+"</div>"},no_results_template:function(){return'<div class="row" style="color: white;"><div class="resultTable"><div class="group1" style="padding-top: 25px;"><center><p>No entries match current filters. Please navigate the map or reset zoom</p></center><br><a href="#" id="" onclick="resetZoom(); return false" style="color:white;"><center>Reset Zoom</a></center></div>'},pagination_el:e(".birdseye-pagination"),pagination_template:function(e){var t,a,n,r,o,i;for(r="<div class='counts'>"+(0===e.count?"0":(e.page-1)*e.per_page+1)+" to "+(e.page*e.per_page>e.count?e.count:e.page*e.per_page)+" of "+e.count+" </div> | Go to page: <ul class='pages'>",a=e.total_pages-e.page<5?8-(e.total_pages-e.page):4,n=e.page-a-1,t=o=1;a>=1?o<=a:o>=a;t=a>=1?++o:--o)n+=1,n<1||(r+="<li><a data-birdseye-role='change-page' data-birdseye-pagenumber='"+n+"'>"+n+"</a></li>");for(r+="<li>"+e.page+"</li>",a=e.page<5?9-e.page:4,n=e.page,t=i=1;a>=1?i<=a:i>=a;t=a>=1?++i:--i)n+=1,n>e.total_pages||(r+="<li><a data-birdseye-role='change-page' data-birdseye-pagenumber='"+n+"'>"+n+"</a></li>");return r+="</ul><div class='prev-next'><a data-birdseye-role='change-page' data-birdseye-pagenumber='"+(e.page-1)+"'>Previous</a> | <a data-birdseye-role='change-page' data-birdseye-pagenumber='"+(e.page+1)+"'>Next</a></div>"}},c=e.extend(c,t),a={},l={},s=[],o=L.map(this[0],{zoomControl:!1,attributionControl:!1}).setView(c.initial_coordinates,c.initial_zoom),mapForReset=o,L.control.zoom({position:"topright"}).addTo(o),L.control.attribution({position:"bottomright"}).setPrefix("").addTo(o),L.tileLayer(c.tile_layer,{attribution:'<i class="fa fa-circle" style="color:#009bcb" title="Mountainbike"></i> Mountainbike <i class="fa fa-circle" style="color:#00aa82" title="E-Mountainbike"></i> E-Mountainbike <i class="fa fa-circle" style="color:#e6330e" title="Road/CX"></i> Road/CX '}).addTo(o),r=function(t){var n,r,s,l;s=t||a,l=c.request_geo_params;for(r in l)n=l[r],s[r]=n(o);return a=s,c.loading_indicator&&(i.addClass("loading"),c.results_el.addClass("loading")),e.ajax({url:c.request_uri+"?"+e.param(s),type:"GET",dataType:"json",success:function(e){if(u(c.response_json_key?e[c.response_json_key]:e),p(e),c.loading_indicator)return i.removeClass("loading"),c.results_el.removeClass("loading")}})},u=function(t){var a,n,r;for(c.results_el.html(""),n=0,r=s.length;n<r;n++)a=s[n],o.removeLayer(a);return t.length>0?e(t).each(function(t,a){var n;a.link;if(t+=1,"testevent"==a.type?(markerid=3,1==a.mtb&&0==a.road&&0==a.emtb?markerid=10:0==a.mtb&&1==a.road&&0==a.emtb?markerid=12:0==a.mtb&&0==a.road&&1==a.emtb?markerid=11:1==a.mtb&&0==a.road&&1==a.emtb?markerid=101:1==a.mtb&&1==a.road&&0==a.emtb?markerid=102:0==a.mtb&&1==a.road&&1==a.emtb?markerid=112:1==a.mtb&&1==a.road&&1==a.emtb&&(markerid="012"),n=L.marker(c.response_params_latlng(a),{icon:new L.NumberedDivIcon({iconUrl:"https://s14761.pcdn.co/wp-content/themes/ENDUROv3/racemap/images/"+markerid+".png?v=6.0",iconSize:[37,70],iconAnchor:[18,59],number:t})})):"top-100-bikeshop"==a.type&&(2==a.blogID?n=L.marker(c.response_params_latlng(a),{icon:new L.NumberedDivIcon({iconUrl:"https://s14761.pcdn.co/wp-content/themes/ENDUROv3/images/top100-marker-emtb.png",iconSize:[37,70],iconAnchor:[18,59],number:t,shopId:a.ID})}):1==a.blogID&&(n=L.marker(c.response_params_latlng(a),{icon:new L.NumberedDivIcon({iconUrl:"https://s14761.pcdn.co/wp-content/themes/ENDUROv3/images/top100-marker-enduro.png",iconSize:[37,70],iconAnchor:[18,59],number:t,shopId:a.ID})}))),"testevent"==a.type){var r=a.startdate.substring(0,4),i=a.startdate.substring(5,7),l=a.startdate.substring(8,10),p=a.enddate.substring(0,4),u=a.enddate.substring(5,7),d=a.enddate.substring(8,10),g=l+"."+i+"."+r,m=d+"."+u+"."+p;"de"==e("meta[property='bt:language']").attr("content")&&(a.brand=a.brand.replace("& more","& weitere"));var b="";""==a.tel&&""==a.email||(b+='<br /><i class="fa fa-info fa-2x"></i>'),""!=a.tel?b+=a.tel:""!=a.email&&(b+='<a href="mailto:'+a.email+'">'+a.email+"</a>");var _='<div class="popup"><img name="logos" src="'+a.logo+'" alt=""><h4>'+a.name+'</h4><div class="info"><p><i class="fa fa-bicycle"></i>'+a.brand+'<br /><span title="'+a.address+'"><i class="fa fa-map-marker fa-2x"></i>'+a.locationname+'</span><br /><i class="fa fa-calendar fa-2x"></i>'+g+" - "+m+b+'</p></div><a href="'+a.link+'" target="_blank" class="letsride"><button type="button">Let&#039;s ride!</button></a></div>'}else if("top-100-bikeshop"==a.type)var _='<div class="popup pop100"><h4>'+a.name+'</h4><i class="fa fa-envelope-square"></i>'+a.street+'<br /><i class="fa fa-envelope-square" style="color:white"></i>'+a.postalcode+" "+a.city+'<br /><i class="fa fa-phone-square"></i>'+a.tel+'<br /><i class="fa fa-envelope-square"></i><a href="mailto:'+a.email+'?subject=Kontakt Ã¼ber Top100 Profil">'+a.email+'</a><br /><i class="fa fa-external-link-square"></i><a href="'+a.website+'" target="_blank">Website</a><br /><a href="'+a.link+'"><button type="button">Mehr Infos</button></a></div>';return s.push(n.bindPopup(_).addTo(o)),c.results_el.append(c.results_template(t,a))}):c.results_el.append(c.no_results_template())},p=function(e){var t;return c.pagination_el.html(""),t={page:c.response_params_pagination.page(e),per_page:c.response_params_pagination.per_page(e),total_pages:c.response_params_pagination.total_pages(e),count:c.response_params_pagination.count(e)},c.pagination_el.append(c.pagination_template(t)),l=t},o.on("dragend zoomend",function(){return r(e.extend(a,{page:1}))}),e(document).on("click","[data-birdseye-role=change-page]",function(){return n.change_page(e(this).data("birdseye-pagenumber"))}),n={},n.set_view=arguments.callee.set_view=function(e,t,a){if(null==a&&(a=!0),o.setView(e,t),a)return n.update()},n.update=arguments.callee.update=function(e){return r(e)},n.change_page=arguments.callee.change_page=function(t){if(!(t>l.total_pages||0===t))return r(e.extend(a,{page:t}))}}})}).call(this);
//# sourceMappingURL=min-birdseyetestevents.js.map
